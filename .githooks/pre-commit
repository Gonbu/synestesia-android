#!/bin/sh

# Pre-commit hook to run ktlint
# This ensures code quality before commits

echo "Running ktlint..."

# Run ktlint only on the app module to avoid issues with root build.gradle.kts
cd app && ../gradlew ktlintCheck

if [ $? -ne 0 ]; then
    echo ""
    echo "⚠️  ktlint found code style violations."
    echo "You can:"
    echo "1. Run './gradlew ktlintFormat' to automatically fix some issues"
    echo "2. Fix the remaining issues manually"
    echo "3. Use 'git commit --no-verify' to bypass this check (not recommended)"
    echo ""
    echo "For more details, check the reports in app/build/reports/ktlint/"
    exit 1
fi

echo "✅ ktlint passed successfully!"
exit 0
